<section>
  <fieldset
    class="fieldset w-full bg-base-200 border border-base-300 p-4 rounded-box flex flex-row gap-4 flex-wrap"
  >
    <legend class="fieldset-legend">Detalles del cliente</legend>
    <div>
      <label class="fieldset-label">Tipo de documento</label>
      <select
        required
        class="select"
        [ngModel]="selected_identification_document_id()"
        (ngModelChange)="selected_identification_document_id.set($event)"
      >
        @for (doc of identification_document_ids; track doc.id) {
        <option [value]="doc.id">{{ doc.name }}</option>
        }
      </select>
    </div>

    <div>
      <label class="fieldset-label">Número de documento</label>
      <input
        type="text"
        class="input"
        [ngModel]="identification()"
        (ngModelChange)="identification.set($event)"
        required
      />
    </div>

    @if(hasNit()){
    <div>
      <label class="fieldset-label">Dígito de verificación</label>
      <input type="text" class="input" [(ngModel)]="dv" required />
    </div>

    }

    <div>
      <label class="fieldset-label">Tipo de organización</label>
      <select
        #legalOrganizationSelect
        required
        class="select"
        [ngModel]="selected_legal_organization_id()"
        (change)="
          selected_legal_organization_id.set(legalOrganizationSelect.value)
        "
      >
        @for (org of legal_organization_ids; track org.id) {
        <option [value]="org.id">{{ org.name }}</option>
        }
      </select>
    </div>

    <div>
      <label class="fieldset-label">Tributo del cliente</label>
      <select
        required
        class="select"
        [ngModel]="selected_tribute_id()"
        (ngModelChange)="selected_tribute_id.set($event)"
      >
        @for (tri of tribute_ids; track tri.id) {
        <option [value]="tri.id">{{ tri.name }}</option>
        }
      </select>
    </div>

    <div>
      <label class="fieldset-label">Nombre de la empresa</label>
      <input
        type="text"
        class="input"
        placeholder="Opcional para personas naturales"
        [(ngModel)]="company"
        [required]="isJuridicalPerson()"
      />
    </div>

    <div>
      <label class="fieldset-label">Nombre comercial</label>
      <input
        type="text"
        class="input"
        placeholder="Opcional"
        [(ngModel)]="tradeName"
      />
    </div>

    @if(!isJuridicalPerson()){
    <div>
      <label class="fieldset-label">Nombre del cliente</label>
      <input
        type="text"
        class="input"
        placeholder="Opcional"
        [(ngModel)]="names"
      />
    </div>

    }

    <div>
      <label class="fieldset-label">Dirección del cliente</label>
      <input
        type="text"
        class="input"
        placeholder="Opcional"
        [(ngModel)]="address"
      />
    </div>

    <div>
      <label class="fieldset-label">Correo electrónico del cliente</label>
      <input
        type="text"
        class="input"
        placeholder="Opcional"
        [(ngModel)]="email"
      />
    </div>

    <div>
      <label class="fieldset-label">Número de teléfono del cliente</label>
      <input
        type="tel"
        class="input"
        placeholder="Opcional"
        [(ngModel)]="phone"
      />
    </div>

    @if(countries().length > 0){
    <div>
      <label class="fieldset-label">País</label>
      <select required class="select" [(ngModel)]="selected_country_id">
        @for (country of countries(); track country.id) {
        <option [value]="country.id">{{ country.name }}</option>
        }
      </select>
    </div>

    } @if(municipalities().length > 0 && selected_country_id === '46'){
    <div>
      <label class="fieldset-label">Municipio</label>
      <select required class="select" [(ngModel)]="selected_municipality_id">
        @for (muni of municipalities(); track muni.id) {
        <option [value]="muni.id">{{ muni.name }}</option>
        }
      </select>
    </div>

    }

    <div>
      <button
        class="btn btn-primary"
        (click)="exportCustomer()"
        [disabled]="try()"
      >
        Probar
      </button>
    </div>
  </fieldset>
</section>
