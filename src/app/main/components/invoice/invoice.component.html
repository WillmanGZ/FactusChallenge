<a class="link link-info" (click)="openModal()">Ver factura</a>

<dialog #invoiceModal class="modal">
  <div class="modal-box w-11/12 max-w-5xl">
    <h2 class="text-3xl font-bold text-center mb-8">
      Factura #{{ invoice().number }}
    </h2>
    @if (invoiceUrl && invoicePdfSafeUrl) {
    <div class="flex flex-row content-center w-full h-[25rem]">
      <iframe
        [src]="invoicePdfSafeUrl"
        width="100%"
        height="100%"
        frameborder="0"
        class="border-2 rounded-xl shadow-md border-gray-400 dark:border-gray-600"
      ></iframe>
      <div class="flex flex-col justify-center items-center gap-4 p-8 w-[30%]">

        <!-- PDF Button -->
        <button class="btn btn-outline gap-2" (click)="downloadPDF()">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="w-5 h-5 text-red-500"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
          >
            <path
              d="M14 2H6a2 2 0 00-2 2v16c0 1.1.9 2 2 2h12a2 2 0 002-2V8l-6-6z"
            />
            <text x="9" y="16" font-size="6" fill="red">PDF</text>
          </svg>
          PDF
        </button>

        <!-- XML Button -->
        <button class="btn btn-outline gap-2" (click)="downloadXML()">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="w-5 h-5 text-blue-500"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
          >
            <path
              d="M14 2H6a2 2 0 00-2 2v16c0 1.1.9 2 2 2h12a2 2 0 002-2V8l-6-6z"
            />
            <text x="7" y="16" font-size="6" fill="blue">XML</text>
          </svg>
          XML
        </button>

        <!-- DIAN Button -->
        <a [href]="invoiceUrl" target="_blank" class="btn btn-outline gap-2">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="w-5 h-5 text-green-500"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
          >
            <path d="M10 14L21 3m0 0v7m0-7h-7" />
            <path d="M21 13v7a2 2 0 01-2 2H5a2 2 0 01-2-2V5a2 2 0 012-2h7" />
          </svg>
          DIAN
        </a>
      </div>
    </div>
    } @else {
    <h2 class="text-3xl font-bold text-center mt-8">Cargando factura ...</h2>
    }

    <div class="modal-action">
      <form method="dialog">
        <button class="btn btn-error">Cerrar</button>
      </form>
    </div>
  </div>
</dialog>
